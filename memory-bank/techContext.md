# Tech Context: sdbh

## Language / runtime
- Rust (stable)
- SQLite (bundled via `rusqlite` feature `bundled`)

## Key dependencies
- `clap` (CLI)
- `rusqlite` (SQLite)
- `sha2` (hashing for de-dup)
- `serde` + `toml` (config parsing; `~/.sdbh.toml`)
- `dirs` (home directory resolution)
- `tempfile` (tests)
- `assert_cmd` + `predicates` (CLI/integration tests)

## Dev workflow
- `cd sdbh && cargo test`
- `cd sdbh && cargo fmt`
- `cd sdbh && cargo clippy -- -D warnings`

## CI / Release automation
- CI: GitHub Actions (`.github/workflows/ci.yml`)

### release-please
- Workflow: `.github/workflows/release-please.yml`
- Files:
  - `release-please-config.json`
  - `.release-please-manifest.json`
- Config is **path-based** because the crate is in `sdbh/`:
  - package key: `sdbh`
  - path: `sdbh`
- Requires repo settings allowing GitHub Actions to create PRs.

### cargo-dist
- Workflow: `.github/workflows/release.yml` (generated by cargo-dist)
- Trigger: tag push matching semver.
- Uploads platform artifacts to the GitHub Release.

### Version Sync Guard (drift prevention)
- Workflow: `.github/workflows/version-sync-guard.yml`
- Trigger: tag push `vX.Y.Zâ€¦`
- Checks:
  - tag version == `sdbh/Cargo.toml` `package.version`
  - tag version == `.release-please-manifest.json["sdbh"]`

## Notes
- The cargo-dist CLI installed in CI is `dist` (not `cargo dist`).
